# 代理模式

### 1. UML类图

![1532514855726](./image/1532514855726.png)

### 2. 代理模式

为其他对象提供一种代理以控制对这个对象的访问。

**何时使用**：想在访问一个类时做一些控制。

**应用场景**：Spring AOP、远程代理、虚拟代理、Windows那些快捷方式

**静态代理和动态代理**：

​	编译时增加行为和运行时增加行为。动态代理在Java中有两种实现方式，一种是JDK代理，需要实现`InvocationHandler`接口，利用`Proxy类newProxyInstance`构造代理对象；另一个种是CGLIB代理，利用它的`MethodInterceptor`接口进行代理扩展，并且CGLIB解决了jdk代理需要被代理对象实现某个接口的问题。

**优点**：对对象进行代理限制而不需要修改原有对象的代码，降低了耦合度。代理对象在这过程中对原对象起到一定程度的保护作用。

**缺点**：额外的工作，增加系统复杂度。



### 3. 代理模式和装饰模式的区别

装饰模式强调的是增强功能，增加额外的职责。而代理模式强调的是限制，最常见的就是用于权限了。比如A类是一个原始类，B类是使用装饰模式扩展A的类，C类是使用代理模式扩展A的类。对于用户调用来说，对于装饰模式，更关心B类的功能；而对于代理模式，则更关心A原有的功能。